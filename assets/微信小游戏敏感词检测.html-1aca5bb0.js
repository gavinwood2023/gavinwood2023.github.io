const n=JSON.parse(`{"key":"v-26ae210f","path":"/blog/MiniGame/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F%E6%95%8F%E6%84%9F%E8%AF%8D%E6%A3%80%E6%B5%8B.html","title":"微信小游戏敏感词检测","lang":"zh-CN","frontmatter":{"title":"微信小游戏敏感词检测","icon":"pen-to-square","category":["minigame"],"tag":["minigame"],"article":true,"timeline":true,"dir":{"index":true,"order":1},"description":"服务器PHP代码 &lt;?php // 替换为您的小程序 appid 和 appsecret $appid = \\"******\\"; $appsecret = \\"******\\"; // 获取 access token $accessToken = getAccessToken($appid, $appsecret); // 要检查的消息内容 $message = $_GET['message']; $openid = $_GET['openid']; // 构建 API 地址 $msgCheckUrl = \\"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\\" . $accessToken; // 构建 POST 数据 $postData = json_encode(array('content' =&gt; $message, 'version' =&gt; 2, 'openid' =&gt; $openid, 'scene' =&gt; 2),JSON_UNESCAPED_UNICODE); // 初始化 cURL $ch = curl_init(); // 设置 cURL 选项 curl_setopt($ch, CURLOPT_URL, $msgCheckUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); // 执行 cURL 请求 $response = curl_exec($ch); // 检查是否有错误发生 if (curl_errno($ch)) { echo 'Curl error: ' . curl_error($ch); } // 关闭 cURL 资源 curl_close($ch); // 输出 API 响应 echo $response; // 获取 access token function getAccessToken($appid, $appsecret) { $accessTokenUrl = \\"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid={$appid}&amp;secret={$appsecret}\\"; $result = json_decode(file_get_contents($accessTokenUrl), true); return $result['access_token']; } ?&gt;","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/MiniGame/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F%E6%95%8F%E6%84%9F%E8%AF%8D%E6%A3%80%E6%B5%8B.html"}],["meta",{"property":"og:site_name","content":"乐见分享"}],["meta",{"property":"og:title","content":"微信小游戏敏感词检测"}],["meta",{"property":"og:description","content":"服务器PHP代码 &lt;?php // 替换为您的小程序 appid 和 appsecret $appid = \\"******\\"; $appsecret = \\"******\\"; // 获取 access token $accessToken = getAccessToken($appid, $appsecret); // 要检查的消息内容 $message = $_GET['message']; $openid = $_GET['openid']; // 构建 API 地址 $msgCheckUrl = \\"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\\" . $accessToken; // 构建 POST 数据 $postData = json_encode(array('content' =&gt; $message, 'version' =&gt; 2, 'openid' =&gt; $openid, 'scene' =&gt; 2),JSON_UNESCAPED_UNICODE); // 初始化 cURL $ch = curl_init(); // 设置 cURL 选项 curl_setopt($ch, CURLOPT_URL, $msgCheckUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); // 执行 cURL 请求 $response = curl_exec($ch); // 检查是否有错误发生 if (curl_errno($ch)) { echo 'Curl error: ' . curl_error($ch); } // 关闭 cURL 资源 curl_close($ch); // 输出 API 响应 echo $response; // 获取 access token function getAccessToken($appid, $appsecret) { $accessTokenUrl = \\"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid={$appid}&amp;secret={$appsecret}\\"; $result = json_decode(file_get_contents($accessTokenUrl), true); return $result['access_token']; } ?&gt;"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-17T14:11:38.000Z"}],["meta",{"property":"article:author","content":"GavinWood"}],["meta",{"property":"article:tag","content":"minigame"}],["meta",{"property":"article:modified_time","content":"2024-08-17T14:11:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"微信小游戏敏感词检测\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-17T14:11:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"GavinWood\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1723903898000,"updatedTime":1723903898000,"contributors":[{"name":"nick","email":"1175924232@qq.com","commits":1}]},"readingTime":{"minutes":0.74,"words":222},"filePathRelative":"blog/MiniGame/微信小游戏敏感词检测.md","localizedDate":"2024年8月17日","excerpt":"<p>服务器PHP代码</p>\\n<div class=\\"language-php line-numbers-mode\\" data-ext=\\"php\\"><pre class=\\"language-php\\"><code><span class=\\"token php language-php\\"><span class=\\"token delimiter important\\">&lt;?php</span>\\n<span class=\\"token comment\\">// 替换为您的小程序 appid 和 appsecret</span>\\n<span class=\\"token variable\\">$appid</span> <span class=\\"token operator\\">=</span> <span class=\\"token string double-quoted-string\\">\\"******\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$appsecret</span> <span class=\\"token operator\\">=</span> <span class=\\"token string double-quoted-string\\">\\"******\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 获取 access token</span>\\n<span class=\\"token variable\\">$accessToken</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">getAccessToken</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$appid</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$appsecret</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 要检查的消息内容</span>\\n<span class=\\"token variable\\">$message</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$_GET</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'message'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$openid</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$_GET</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'openid'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 构建 API 地址</span>\\n<span class=\\"token variable\\">$msgCheckUrl</span> <span class=\\"token operator\\">=</span> <span class=\\"token string double-quoted-string\\">\\"https://api.weixin.qq.com/wxa/msg_sec_check?access_token=\\"</span> <span class=\\"token operator\\">.</span> <span class=\\"token variable\\">$accessToken</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 构建 POST 数据</span>\\n<span class=\\"token variable\\">$postData</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">json_encode</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">array</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'content'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$message</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'version'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'openid'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$openid</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'scene'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span><span class=\\"token constant\\">JSON_UNESCAPED_UNICODE</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 初始化 cURL</span>\\n<span class=\\"token variable\\">$ch</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">curl_init</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 设置 cURL 选项</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_URL</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$msgCheckUrl</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_POST</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_POSTFIELDS</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$postData</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_RETURNTRANSFER</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant boolean\\">true</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_HTTPHEADER</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">array</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'Content-Type: application/json'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 执行 cURL 请求</span>\\n<span class=\\"token variable\\">$response</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">curl_exec</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 检查是否有错误发生</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token function\\">curl_errno</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">echo</span> <span class=\\"token string single-quoted-string\\">'Curl error: '</span> <span class=\\"token operator\\">.</span> <span class=\\"token function\\">curl_error</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// 关闭 cURL 资源</span>\\n<span class=\\"token function\\">curl_close</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 输出 API 响应</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token variable\\">$response</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 获取 access token</span>\\n<span class=\\"token keyword\\">function</span> <span class=\\"token function-definition function\\">getAccessToken</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$appid</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$appsecret</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token variable\\">$accessTokenUrl</span> <span class=\\"token operator\\">=</span> <span class=\\"token string double-quoted-string\\">\\"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=<span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span><span class=\\"token variable\\">$appid</span><span class=\\"token punctuation\\">}</span></span>&amp;secret=<span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span><span class=\\"token variable\\">$appsecret</span><span class=\\"token punctuation\\">}</span></span>\\"</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token variable\\">$result</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">json_decode</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">file_get_contents</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$accessTokenUrl</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant boolean\\">true</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token variable\\">$result</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'access_token'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token delimiter important\\">?&gt;</span></span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
