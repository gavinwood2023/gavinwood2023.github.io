const n=JSON.parse(`{"key":"v-e9f1998a","path":"/blog/MiniGame/%E6%8A%96%E9%9F%B3%E5%B0%8F%E6%B8%B8%E6%88%8F%E9%80%9A%E8%BF%87code%E8%8E%B7%E5%8F%96openid.html","title":"抖音小游戏通过code获取openid","lang":"zh-CN","frontmatter":{"title":"抖音小游戏通过code获取openid","icon":"pen-to-square","category":["minigame"],"tag":["minigame"],"article":true,"timeline":true,"dir":{"index":true,"order":1},"description":"服务器PHP代码 &lt;?php // 替换成你的小游戏 App Key 和 App Secret $app_key = '******'; $app_secret = '******'; // 通过 GET 方法获取用户授权登录后的 code $code = $_GET['code']; // 构造 POST 请求的数据 $postData = json_encode(array( 'appid' =&gt; $app_key, 'secret' =&gt; $app_secret, 'code' =&gt; $code )); // 初始化一个 cURL 句柄 $ch = curl_init(); // 设置 cURL 选项 curl_setopt($ch, CURLOPT_URL, 'https://developer.toutiao.com/api/apps/v2/jscode2session'); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_POST, true); curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Content-Type: application/json', 'Content-Length: ' . strlen($postData) )); // 执行 POST 请求 $response = curl_exec($ch); echo $response; // 关闭 cURL 句柄 curl_close($ch); ?&gt;","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/MiniGame/%E6%8A%96%E9%9F%B3%E5%B0%8F%E6%B8%B8%E6%88%8F%E9%80%9A%E8%BF%87code%E8%8E%B7%E5%8F%96openid.html"}],["meta",{"property":"og:site_name","content":"乐见分享"}],["meta",{"property":"og:title","content":"抖音小游戏通过code获取openid"}],["meta",{"property":"og:description","content":"服务器PHP代码 &lt;?php // 替换成你的小游戏 App Key 和 App Secret $app_key = '******'; $app_secret = '******'; // 通过 GET 方法获取用户授权登录后的 code $code = $_GET['code']; // 构造 POST 请求的数据 $postData = json_encode(array( 'appid' =&gt; $app_key, 'secret' =&gt; $app_secret, 'code' =&gt; $code )); // 初始化一个 cURL 句柄 $ch = curl_init(); // 设置 cURL 选项 curl_setopt($ch, CURLOPT_URL, 'https://developer.toutiao.com/api/apps/v2/jscode2session'); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_POST, true); curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Content-Type: application/json', 'Content-Length: ' . strlen($postData) )); // 执行 POST 请求 $response = curl_exec($ch); echo $response; // 关闭 cURL 句柄 curl_close($ch); ?&gt;"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-17T14:11:38.000Z"}],["meta",{"property":"article:author","content":"GavinWood"}],["meta",{"property":"article:tag","content":"minigame"}],["meta",{"property":"article:modified_time","content":"2024-08-17T14:11:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"抖音小游戏通过code获取openid\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-17T14:11:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"GavinWood\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1723903898000,"updatedTime":1723903898000,"contributors":[{"name":"nick","email":"1175924232@qq.com","commits":1}]},"readingTime":{"minutes":0.56,"words":167},"filePathRelative":"blog/MiniGame/抖音小游戏通过code获取openid.md","localizedDate":"2024年8月17日","excerpt":"<p>服务器PHP代码</p>\\n<div class=\\"language-php line-numbers-mode\\" data-ext=\\"php\\"><pre class=\\"language-php\\"><code><span class=\\"token php language-php\\"><span class=\\"token delimiter important\\">&lt;?php</span>\\n<span class=\\"token comment\\">// 替换成你的小游戏 App Key 和 App Secret</span>\\n<span class=\\"token variable\\">$app_key</span> <span class=\\"token operator\\">=</span> <span class=\\"token string single-quoted-string\\">'******'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$app_secret</span> <span class=\\"token operator\\">=</span> <span class=\\"token string single-quoted-string\\">'******'</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 通过 GET 方法获取用户授权登录后的 code</span>\\n<span class=\\"token variable\\">$code</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$_GET</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'code'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 构造 POST 请求的数据</span>\\n<span class=\\"token variable\\">$postData</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">json_encode</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">array</span><span class=\\"token punctuation\\">(</span>\\n    <span class=\\"token string single-quoted-string\\">'appid'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$app_key</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token string single-quoted-string\\">'secret'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$app_secret</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token string single-quoted-string\\">'code'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$code</span>\\n<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 初始化一个 cURL 句柄</span>\\n<span class=\\"token variable\\">$ch</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">curl_init</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 设置 cURL 选项</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_URL</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'https://developer.toutiao.com/api/apps/v2/jscode2session'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_RETURNTRANSFER</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant boolean\\">true</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_POST</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant boolean\\">true</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_POSTFIELDS</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$postData</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">curl_setopt</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">CURLOPT_HTTPHEADER</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">array</span><span class=\\"token punctuation\\">(</span>\\n    <span class=\\"token string single-quoted-string\\">'Content-Type: application/json'</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token string single-quoted-string\\">'Content-Length: '</span> <span class=\\"token operator\\">.</span> <span class=\\"token function\\">strlen</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$postData</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 执行 POST 请求</span>\\n<span class=\\"token variable\\">$response</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">curl_exec</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token variable\\">$response</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 关闭 cURL 句柄</span>\\n<span class=\\"token function\\">curl_close</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$ch</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token delimiter important\\">?&gt;</span></span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
